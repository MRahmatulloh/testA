import{_ as y,o as i,a as n,F as l,j as c,t as o,m as f,b as m,e as V,i as p,h as k,d as g,c as v}from"./index_prod.8b652d5e.js";import{v as u,_ as S}from"./ComponentResolver.3d0a1e32.js";const T={inheritAttrs:!1,props:{item:{type:Object,required:!0},id:{required:!0}},data(){return{currentValue:this.item.options.isBoolean?this.item.value?1:0:this.item.value,items:{}}},created(){typeof this.item.options.items=="function"?this.items=this.item.options.items(this,this.currentValue):this.items=this.item.options.items},methods:{send(){let e=$("#"+this.item.id).val(),t=this.item.options.path.replace(":id",this.id).replace(":value",e);this.booted.helpers.http.send(this,{method:"PATCH",path:t}).then(s=>{s.statusType==="success"?(this.currentValue=e,this.item.options.onSuccess&&this.item.options.onSuccess(this,this.currentValue)):$("#"+this.item.id).val(this.currentValue)})}}},w=["id","value"],q=["value"];function P(e,t,s,r,a,d){return i(),n("select",f({onChange:t[0]||(t[0]=(...h)=>d.send&&d.send(...h)),class:"form-control",id:s.item.id,value:a.currentValue},s.item.attributes),[(i(!0),n(l,null,c(a.items,(h,b)=>(i(),n("option",{value:b},o(h),9,q))),256))],16,w)}var U=y(T,[["render",P]]);const O={inheritAttrs:!1,props:{item:{type:Object,required:!0},id:{required:!0}},data(){return{currentValue:this.item.options.isBoolean?this.item.value?1:0:this.item.value,items:{}}},created(){typeof this.item.options.items=="function"?this.items=this.item.options.items(this,this.currentValue):this.items=this.item.options.items},methods:{send(){let e=$("#"+this.item.id).val(),t=this.item.options.path.replace(":id",this.id).replace(":value",e),s=new FormData;s.append(this.item.options.element,e),this.booted.helpers.http.send(this,{method:"POST",path:t,query:{_method:"PUT",method_field:"PUT"},body:s}).then(r=>{r.statusType==="success"?(this.currentValue=e,toastr.success("\u0417\u0430\u043F\u0438\u0441\u044C \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0430"),this.item.options.onSuccess&&this.item.options.onSuccess(this,this.currentValue)):($("#"+this.item.id).val(this.currentValue),toastr.error("\u041F\u0440\u043E\u0438\u0437\u043E\u0448\u043B\u0430 \u043E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u0435 \u0437\u0430\u043F\u0438\u0441\u0438"))})}}},j=["id","value"],F=["value"];function C(e,t,s,r,a,d){return i(),n("select",f({onChange:t[0]||(t[0]=(...h)=>d.send&&d.send(...h)),class:"form-control",id:s.item.id,value:a.currentValue},s.item.attributes),[(i(!0),n(l,null,c(a.items,(h,b)=>(i(),n("option",{value:b},o(h),9,F))),256))],16,j)}var D=y(O,[["render",C]]);const H={inheritAttrs:!1,props:{item:{type:Object,required:!0},id:{required:!0}},data(){return{currentValue:this.item.value}},mounted(){$("#"+this.item.id).bootstrapSwitch("state",$("#"+this.item.id).prop("checked")),$("#"+this.item.id).on("switchChange.bootstrapSwitch",(e,t)=>{let s=this.item.options.path.replace(":id",this.id).replace(":value",t?1:0);this.booted.helpers.http.send(this,{method:"PATCH",path:s}).then(r=>{r.statusType==="success"?(this.currentValue=t,this.item.options.onSuccess&&this.item.options.onSuccess(this,this.currentValue),toastr.success("\u0417\u0430\u043F\u0438\u0441\u044C \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0430")):($("#"+this.item.id).bootstrapSwitch("state",this.currentValue,!0),toastr.error("\u041F\u0440\u043E\u0438\u0437\u043E\u0448\u043B\u0430 \u043E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u0435 \u0437\u0430\u043F\u0438\u0441\u0438"))})})}},B=["id","checked"];function N(e,t,s,r,a,d){return i(),n("input",f({type:"checkbox"},s.item.attributes,{id:s.item.id,checked:a.currentValue,"data-bootstrap-switch":"","data-on-text":"<i class='fas fa-check'></i>","data-off-text":"<i class='fas fa-times'></i>","data-on-color":"success","data-off-color":"danger"}),null,16,B)}var L=y(H,[["render",N]]);const A={key:0},M={props:{item:{type:Object,required:!0},id:{required:!0}},data(){return{model:this.booted.components.current.config.model,itemGroups:{}}},created(){for(let e in this.item.value)this.itemGroups[e]=this.model.prepareValues(this,this.item.options.fields,this.item.value[e])}},G=Object.assign(M,{name:"Relations",setup(e){return(t,s)=>(i(!0),n(l,null,c(t.itemGroups,(r,a)=>(i(),n(l,null,[(i(!0),n(l,null,c(r,d=>(i(),n("div",null,[m("i",null,o(d.label)+": ",1),V(ce,{item:d,id:e.id},null,8,["item","id"])]))),256)),a<Object.keys(t.itemGroups).length-1?(i(),n("hr",A)):p("",!0)],64))),256))}}),I={props:{item:{type:Object,required:!0}},mounted(){$("#"+this.item.id).owlCarousel({loop:!1,responsiveClass:!0,autoHeight:!1,margin:10,responsive:{0:{items:1},600:{items:3},1e3:{items:5}}})}},R=["id"],J=["src"];function z(e,t,s,r,a,d){return i(),n("div",{id:s.item.id,class:"owl-carousel"},[(i(!0),n(l,null,c(s.item.value,h=>(i(),n("img",f({src:h},s.item.attributes),null,16,J))),256))],8,R)}var K=y(I,[["render",z]]);const Q={key:1},W=["item"],X=["id"],Y=["id"],Z={key:1,class:"text-center"},E={class:"btn btn-success mr-3 disabled"},x={class:"btn btn-danger disabled"},_={key:3},ee=["item"],te=["id"],ie=["href"],se=["href"],ne=["innerHTML"],re=["src"],ae=["innerHTML"],oe={class:"col-10"},ue={class:"col-2"},le=["href"],de={key:16,style:{"white-space":"pre-wrap"}},me=["href"],he={methods:{getFormUser(e){let t=e.target.elements[0].id,s=e.target.elements[0].value,r=new FormData;r.append("id",t),r.append("value",s);let a="user/user/"+t+"/set-min-sum";this.booted.helpers.http.send(this,{method:"POST",path:a,query:{_method:"PUT",method_field:"PUT"},body:r}).then(d=>{d.statusType==="success"?(this.currentValue=s,toastr.success("\u0417\u0430\u043F\u0438\u0441\u044C \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0430"),this.item.options.onSuccess&&this.item.options.onSuccess(this,this.currentValue)):($("#"+this.item.id).val(this.currentValue),toastr.error("\u041F\u0440\u043E\u0438\u0437\u043E\u0448\u043B\u0430 \u043E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u0435 \u0437\u0430\u043F\u0438\u0441\u0438"))})},getFormProduct(e){let t=e.target.elements[0].id,s=e.target.elements[0].value,r=new FormData;r.append("id",t),r.append("value",s);let a="product/product/"+t+"/set-low-count";this.booted.helpers.http.send(this,{method:"POST",path:a,query:{_method:"PUT",method_field:"PUT"},body:r}).then(d=>{d.statusType==="success"?(this.currentValue=s,toastr.success("\u0417\u0430\u043F\u0438\u0441\u044C \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0430"),this.item.options.onSuccess&&this.item.options.onSuccess(this,this.currentValue)):($("#"+this.item.id).val(this.currentValue),toastr.error("\u041F\u0440\u043E\u0438\u0437\u043E\u0448\u043B\u0430 \u043E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u0435 \u0437\u0430\u043F\u0438\u0441\u0438"))})},apply(e){let t=new FormData;t.append("id",e);let s="user/request/"+e+"/apply";this.booted.helpers.http.send(this,{method:"POST",path:s,query:{_method:"PUT",method_field:"PUT"},body:t}).then(r=>{r.statusType==="success"?(toastr.success("\u0417\u0430\u043F\u0438\u0441\u044C \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0430"),$("#"+e).hide()):($("#"+this.item.id).val(this.currentValue),toastr.error("\u041F\u0440\u043E\u0438\u0437\u043E\u0448\u043B\u0430 \u043E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u0435 \u0437\u0430\u043F\u0438\u0441\u0438"))})},refuse(e){let t=new FormData;t.append("id",e);let s="user/request/"+e+"/refuse";this.booted.helpers.http.send(this,{method:"POST",path:s,query:{_method:"PUT",method_field:"PUT"},body:t}).then(r=>{r.statusType==="success"?(toastr.success("\u0417\u0430\u043F\u0438\u0441\u044C \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0430"),$("#"+e).hide(),this.item.options.onSuccess&&this.item.options.onSuccess(this,this.currentValue)):($("#"+this.item.id).val(this.currentValue),toastr.error("\u041F\u0440\u043E\u0438\u0437\u043E\u0448\u043B\u0430 \u043E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u0435 \u0437\u0430\u043F\u0438\u0441\u0438"))})}},props:{item:{type:Object,required:!0},id:{required:!0}},created(){this.item.id="el-"+this.booted.helpers.string.uniqueId(),this.item.attributes=typeof this.item.attributes=="function"?this.item.attributes(this):this.item.attributes}},ce=Object.assign(he,{name:"Value",setup(e){return(t,s)=>e.item.type===u.array?(i(!0),n(l,{key:0},c(e.item.value,r=>(i(),n("div",null,o(r),1))),256)):e.item.type==="min_sum"?(i(),n("div",Q,[m("form",{onSubmit:s[0]||(s[0]=k((...r)=>t.getFormUser&&t.getFormUser(...r),["prevent"])),item:e.item},[m("input",f({type:"number"},{value:e.item.value},{id:e.id,class:"form-control"}),null,16,X)],40,W)])):e.item.type==="action"?(i(),n(l,{key:2},[e.item.value?(i(),n("div",{key:0,class:"text-center",id:e.id},[m("div",{onClick:s[1]||(s[1]=r=>t.refuse(e.id)),class:"btn btn-success mr-3 reqBtn"},o(t.__("\u041E\u0442\u043A\u043B\u043E\u043D\u0438\u0442\u044C")),1),m("div",{onClick:s[2]||(s[2]=r=>t.apply(e.id)),class:"btn btn-danger reqBtn"},o(t.__("\u0423\u0434\u0430\u043B\u0438\u0442\u044C")),1)],8,Y)):(i(),n("div",Z,[m("div",E,o(t.__("\u041E\u0442\u043A\u043B\u043E\u043D\u0438\u0442\u044C")),1),m("div",x,o(t.__("\u0423\u0434\u0430\u043B\u0438\u0442\u044C")),1)]))],64)):e.item.type==="low_count"?(i(),n("div",_,[m("form",{onSubmit:s[3]||(s[3]=k((...r)=>t.getFormProduct&&t.getFormProduct(...r),["prevent"])),item:e.item},[m("input",f({type:"number"},{value:e.item.value},{id:e.id,class:"form-control"}),null,16,te)],40,ee)])):e.item.type===u.boolean?(i(),n(l,{key:4},[g(o(e.item.value?t.__("\u0414\u0430"):t.__("\u041D\u0435\u0442")),1)],64)):e.item.type===u.component?(i(),v(S,{key:5,resolve:e.item.options.resolve(t.booted.components.current,e.item)},null,8,["resolve"])):e.item.type===u.link?(i(),n(l,{key:6},[typeof e.item.value=="object"?(i(!0),n(l,{key:0},c(e.item.value,(r,a)=>(i(),n("a",{href:r,target:"_blank",class:"d-block"},o(t.__("\u0421\u0441\u044B\u043B\u043A\u0430 \u2116:index",{index:a+1})),9,ie))),256)):(i(),n("a",{key:1,href:e.item.value,target:"_blank"},o(t.__("\u0421\u0441\u044B\u043B\u043A\u0430")),9,se))],64)):e.item.type===u.html?(i(),n("div",{key:7,innerHTML:e.item.value},null,8,ne)):e.item.type===u.httpSelect?(i(),v(U,{key:8,item:e.item,id:e.id},null,8,["item","id"])):e.item.type===u.httpSelectNew?(i(),v(D,{key:9,item:e.item,id:e.id},null,8,["item","id"])):e.item.type===u.httpSwitcher?(i(),v(L,{key:10,item:e.item,id:e.id},null,8,["item","id"])):e.item.type===u.image?(i(),n(l,{key:11},[typeof e.item.value=="object"?(i(),v(K,{key:0,item:e.item},null,8,["item"])):(i(),n("img",f({key:1,src:e.item.value},e.item.attributes),null,16,re))],64)):e.item.type===u.json?(i(),n("pre",{key:12,innerHTML:JSON.stringify(e.item.value,null,2)},null,8,ae)):e.item.type===u.worker?(i(),n(l,{key:13},[(i(!0),n(l,null,c(e.item.value,(r,a)=>(i(),n("div",{key:a,class:"row"},[m("div",oe,o(t.booted.enums.user.role[r.role].label),1),m("div",ue,o(r.count),1)]))),128)),typeof e.item.value[0]=="object"?(i(),n("a",{key:0,href:t.booted.config.http.websiteUrl+"/"+t.booted.locale+"/"+e.item.options.path.replace(":value",e.item.value[0].card_number),target:"_blank",class:"d-block text-center"},o(t.__("\u041F\u043E\u0434\u0440\u043E\u0431\u043D\u043E")),9,le)):p("",!0)],64)):e.item.type===u.price?(i(),n(l,{key:14},[g(o(e.item.value!==null?new Intl.NumberFormat("ru-RU").format(e.item.value).replace(",","."):null),1)],64)):e.item.type===u.relations?(i(),v(G,{key:15,item:e.item,id:e.id},null,8,["item","id"])):e.item.type===u.text?(i(),n("span",de,o(e.item.value),1)):e.item.type===u.websiteLink?(i(),n("a",{key:17,href:t.booted.config.http.websiteUrl+"/"+t.booted.locale+"/"+e.item.options.path.replace(":value",e.item.value),target:"_blank"},o(e.item.value),9,me)):p("",!0)}});export{ce as _};
