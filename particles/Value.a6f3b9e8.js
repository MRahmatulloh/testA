import{_ as y,o as t,a as s,F as l,j as d,t as m,m as f,b as h,e as V,i as p,h as k,d as g,c as v}from"./index_prod.7e63d868.js";import{v as o,_ as S}from"./ComponentResolver.773f5782.js";const w={inheritAttrs:!1,props:{item:{type:Object,required:!0},id:{required:!0}},data(){return{currentValue:this.item.options.isBoolean?this.item.value?1:0:this.item.value,items:{}}},created(){typeof this.item.options.items=="function"?this.items=this.item.options.items(this,this.currentValue):this.items=this.item.options.items},methods:{send(){let e=$("#"+this.item.id).val(),i=this.item.options.path.replace(":id",this.id).replace(":value",e);this.booted.helpers.http.send(this,{method:"PATCH",path:i}).then(r=>{r.statusType==="success"?(this.currentValue=e,this.item.options.onSuccess&&this.item.options.onSuccess(this,this.currentValue)):$("#"+this.item.id).val(this.currentValue)})}}},T=["id","value"],q=["value"];function P(e,i,r,n,a,u){return t(),s("select",f({onChange:i[0]||(i[0]=(...c)=>u.send&&u.send(...c)),class:"form-control",id:r.item.id,value:a.currentValue},r.item.attributes),[(t(!0),s(l,null,d(a.items,(c,b)=>(t(),s("option",{value:b},m(c),9,q))),256))],16,T)}var j=y(w,[["render",P]]);const O={inheritAttrs:!1,props:{item:{type:Object,required:!0},id:{required:!0}},data(){return{currentValue:this.item.options.isBoolean?this.item.value?1:0:this.item.value,items:{}}},created(){typeof this.item.options.items=="function"?this.items=this.item.options.items(this,this.currentValue):this.items=this.item.options.items},methods:{send(){let e=$("#"+this.item.id).val(),i=this.item.options.path.replace(":id",this.id).replace(":value",e),r=new FormData;r.append(this.item.options.element,e),this.booted.helpers.http.send(this,{method:"POST",path:i,query:{_method:"PUT",method_field:"PUT"},body:r}).then(n=>{n.statusType==="success"?(this.currentValue=e,toastr.success("\u0417\u0430\u043F\u0438\u0441\u044C \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0430"),this.item.options.onSuccess&&this.item.options.onSuccess(this,this.currentValue)):($("#"+this.item.id).val(this.currentValue),toastr.error("\u041F\u0440\u043E\u0438\u0437\u043E\u0448\u043B\u0430 \u043E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u0435 \u0437\u0430\u043F\u0438\u0441\u0438"))})}}},F=["id","value"],U=["value"];function H(e,i,r,n,a,u){return t(),s("select",f({onChange:i[0]||(i[0]=(...c)=>u.send&&u.send(...c)),class:"form-control",id:r.item.id,value:a.currentValue},r.item.attributes),[(t(!0),s(l,null,d(a.items,(c,b)=>(t(),s("option",{value:b},m(c),9,U))),256))],16,F)}var C=y(O,[["render",H]]);const N={inheritAttrs:!1,props:{item:{type:Object,required:!0},id:{required:!0}},data(){return{currentValue:this.item.value}},mounted(){$("#"+this.item.id).bootstrapSwitch("state",$("#"+this.item.id).prop("checked")),$("#"+this.item.id).on("switchChange.bootstrapSwitch",(e,i)=>{let r=this.item.options.path.replace(":id",this.id).replace(":value",i?1:0);this.booted.helpers.http.send(this,{method:"PATCH",path:r}).then(n=>{n.statusType==="success"?(this.currentValue=i,this.item.options.onSuccess&&this.item.options.onSuccess(this,this.currentValue),toastr.success("\u0417\u0430\u043F\u0438\u0441\u044C \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0430")):($("#"+this.item.id).bootstrapSwitch("state",this.currentValue,!0),toastr.error("\u041F\u0440\u043E\u0438\u0437\u043E\u0448\u043B\u0430 \u043E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u0435 \u0437\u0430\u043F\u0438\u0441\u0438"))})})}},B=["id","checked"];function D(e,i,r,n,a,u){return t(),s("input",f({type:"checkbox"},r.item.attributes,{id:r.item.id,checked:a.currentValue,"data-bootstrap-switch":"","data-on-text":"<i class='fas fa-check'></i>","data-off-text":"<i class='fas fa-times'></i>","data-on-color":"success","data-off-color":"danger"}),null,16,B)}var L=y(N,[["render",D]]);const A={key:0},M={props:{item:{type:Object,required:!0},id:{required:!0}},data(){return{model:this.booted.components.current.config.model,itemGroups:{}}},created(){for(let e in this.item.value)this.itemGroups[e]=this.model.prepareValues(this,this.item.options.fields,this.item.value[e])}},G=Object.assign(M,{name:"Relations",setup(e){return(i,r)=>(t(!0),s(l,null,d(i.itemGroups,(n,a)=>(t(),s(l,null,[(t(!0),s(l,null,d(n,u=>(t(),s("div",null,[h("i",null,m(u.label)+": ",1),V(le,{item:u,id:e.id},null,8,["item","id"])]))),256)),a<Object.keys(i.itemGroups).length-1?(t(),s("hr",A)):p("",!0)],64))),256))}}),I={props:{item:{type:Object,required:!0}},mounted(){$("#"+this.item.id).owlCarousel({loop:!1,responsiveClass:!0,autoHeight:!1,margin:10,responsive:{0:{items:1},600:{items:3},1e3:{items:5}}})}},R=["id"],J=["src"];function z(e,i,r,n,a,u){return t(),s("div",{id:r.item.id,class:"owl-carousel"},[(t(!0),s(l,null,d(r.item.value,c=>(t(),s("img",f({src:c},r.item.attributes),null,16,J))),256))],8,R)}var K=y(I,[["render",z]]);const Q={key:1},W=["item"],X=["id"],Y={key:2},Z=["item"],x=["id"],E=["href"],_=["href"],ee=["innerHTML"],te=["src"],ie=["innerHTML"],se={class:"col-10"},re={class:"col-2"},ne=["href"],ae={key:15,style:{"white-space":"pre-wrap"}},oe=["href"],ue={methods:{getFormUser(e){let i=e.target.elements[0].id,r=e.target.elements[0].value,n=new FormData;n.append("id",i),n.append("value",r);let a="user/user/"+i+"/set-min-sum";this.booted.helpers.http.send(this,{method:"POST",path:a,query:{_method:"PUT",method_field:"PUT"},body:n}).then(u=>{u.statusType==="success"?(this.currentValue=r,toastr.success("\u0417\u0430\u043F\u0438\u0441\u044C \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0430"),this.item.options.onSuccess&&this.item.options.onSuccess(this,this.currentValue)):($("#"+this.item.id).val(this.currentValue),toastr.error("\u041F\u0440\u043E\u0438\u0437\u043E\u0448\u043B\u0430 \u043E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u0435 \u0437\u0430\u043F\u0438\u0441\u0438"))})},getFormProduct(e){let i=e.target.elements[0].id,r=e.target.elements[0].value,n=new FormData;n.append("id",i),n.append("value",r);let a="product/product/"+i+"/set-low-count";this.booted.helpers.http.send(this,{method:"POST",path:a,query:{_method:"PUT",method_field:"PUT"},body:n}).then(u=>{u.statusType==="success"?(this.currentValue=r,toastr.success("\u0417\u0430\u043F\u0438\u0441\u044C \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0430"),this.item.options.onSuccess&&this.item.options.onSuccess(this,this.currentValue)):($("#"+this.item.id).val(this.currentValue),toastr.error("\u041F\u0440\u043E\u0438\u0437\u043E\u0448\u043B\u0430 \u043E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u0435 \u0437\u0430\u043F\u0438\u0441\u0438"))})}},props:{item:{type:Object,required:!0},id:{required:!0}},created(){this.item.id="el-"+this.booted.helpers.string.uniqueId(),this.item.attributes=typeof this.item.attributes=="function"?this.item.attributes(this):this.item.attributes}},le=Object.assign(ue,{name:"Value",setup(e){return(i,r)=>e.item.type===o.array?(t(!0),s(l,{key:0},d(e.item.value,n=>(t(),s("div",null,m(n),1))),256)):e.item.type==="min_sum"?(t(),s("div",Q,[h("form",{onSubmit:r[0]||(r[0]=k((...n)=>i.getFormUser&&i.getFormUser(...n),["prevent"])),item:e.item},[h("input",f({type:"number"},{value:e.item.value},{id:e.id,class:"form-control"}),null,16,X)],40,W)])):e.item.type==="low_count"?(t(),s("div",Y,[h("form",{onSubmit:r[1]||(r[1]=k((...n)=>i.getFormProduct&&i.getFormProduct(...n),["prevent"])),item:e.item},[h("input",f({type:"number"},{value:e.item.value},{id:e.id,class:"form-control"}),null,16,x)],40,Z)])):e.item.type===o.boolean?(t(),s(l,{key:3},[g(m(e.item.value?i.__("\u0414\u0430"):i.__("\u041D\u0435\u0442")),1)],64)):e.item.type===o.component?(t(),v(S,{key:4,resolve:e.item.options.resolve(i.booted.components.current,e.item)},null,8,["resolve"])):e.item.type===o.link?(t(),s(l,{key:5},[typeof e.item.value=="object"?(t(!0),s(l,{key:0},d(e.item.value,(n,a)=>(t(),s("a",{href:n,target:"_blank",class:"d-block"},m(i.__("\u0421\u0441\u044B\u043B\u043A\u0430 \u2116:index",{index:a+1})),9,E))),256)):(t(),s("a",{key:1,href:e.item.value,target:"_blank"},m(i.__("\u0421\u0441\u044B\u043B\u043A\u0430")),9,_))],64)):e.item.type===o.html?(t(),s("div",{key:6,innerHTML:e.item.value},null,8,ee)):e.item.type===o.httpSelect?(t(),v(j,{key:7,item:e.item,id:e.id},null,8,["item","id"])):e.item.type===o.httpSelectNew?(t(),v(C,{key:8,item:e.item,id:e.id},null,8,["item","id"])):e.item.type===o.httpSwitcher?(t(),v(L,{key:9,item:e.item,id:e.id},null,8,["item","id"])):e.item.type===o.image?(t(),s(l,{key:10},[typeof e.item.value=="object"?(t(),v(K,{key:0,item:e.item},null,8,["item"])):(t(),s("img",f({key:1,src:e.item.value},e.item.attributes),null,16,te))],64)):e.item.type===o.json?(t(),s("pre",{key:11,innerHTML:JSON.stringify(e.item.value,null,2)},null,8,ie)):e.item.type===o.worker?(t(),s(l,{key:12},[(t(!0),s(l,null,d(e.item.value,(n,a)=>(t(),s("div",{key:a,class:"row"},[h("div",se,m(i.booted.enums.user.role[n.role].label),1),h("div",re,m(n.count),1)]))),128)),typeof e.item.value[0]=="object"?(t(),s("a",{key:0,href:i.booted.config.http.websiteUrl+"/"+i.booted.locale+"/"+e.item.options.path.replace(":value",e.item.value[0].card_number),target:"_blank",class:"d-block text-center"},m(i.__("\u041F\u043E\u0434\u0440\u043E\u0431\u043D\u043E")),9,ne)):p("",!0)],64)):e.item.type===o.price?(t(),s(l,{key:13},[g(m(e.item.value!==null?new Intl.NumberFormat("ru-RU").format(e.item.value).replace(",","."):null),1)],64)):e.item.type===o.relations?(t(),v(G,{key:14,item:e.item,id:e.id},null,8,["item","id"])):e.item.type===o.text?(t(),s("span",ae,m(e.item.value),1)):e.item.type===o.websiteLink?(t(),s("a",{key:16,href:i.booted.config.http.websiteUrl+"/"+i.booted.locale+"/"+e.item.options.path.replace(":value",e.item.value),target:"_blank"},m(e.item.value),9,oe)):p("",!0)}});export{le as _};
